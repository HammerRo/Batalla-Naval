# ğŸ—ï¸ ARQUITECTURA - Sistema de AutenticaciÃ³n RF01

## ğŸ“ Diagrama General

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BATALLA NAVAL                          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   index.html                         â”‚  â”‚
â”‚  â”‚         (Punto de entrada de la aplicaciÃ³n)         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â†“                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              src/js/main.js                          â”‚  â”‚
â”‚  â”‚      (InicializaciÃ³n de la aplicaciÃ³n)              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â†“                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           BattleshipApp.initialize()                â”‚   â”‚
â”‚  â”‚                    â†“                                â”‚   â”‚
â”‚  â”‚         showLoginScreen()                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚     PANTALLA DE LOGIN            â”‚
        â”‚  (LoginScreen.js)               â”‚
        â”‚                                 â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚  Input: Usuario          â”‚  â”‚
        â”‚  â”‚  Input: ContraseÃ±a       â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â”‚                                 â”‚
        â”‚  [Registrarse]                 â”‚
        â”‚  [Iniciar SesiÃ³n]              â”‚
        â”‚  [Jugar como Invitado]         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“               â†“               â†“
[Registro]    [Login]          [Invitado]
    â”‚               â”‚               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   AuthService.login()         â”‚
    â”‚   AuthService.register()      â”‚
    â”‚   AuthService.loginAsGuest()  â”‚
    â”‚                              â”‚
    â”‚   â€¢ Validar datos            â”‚
    â”‚   â€¢ Verificar duplicados      â”‚
    â”‚   â€¢ Crear usuario             â”‚
    â”‚   â€¢ Guardar en localStorage   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   onLoginSuccess()            â”‚
    â”‚                              â”‚
    â”‚   â€¢ Iniciar GameController    â”‚
    â”‚   â€¢ Iniciar UIManager         â”‚
    â”‚   â€¢ Cargar usuario            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   PANTALLA DE JUEGO   â”‚
        â”‚  (Batalla Naval)      â”‚
        â”‚                       â”‚
        â”‚ Nombre usuario        â”‚
        â”‚ Tableros              â”‚
        â”‚ Controles             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Flujo de Registro

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Usuario   â”‚
â”‚ completa    â”‚
â”‚ formulario  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LoginScreen: handleFormSubmit()      â”‚
â”‚                                     â”‚
â”‚ â€¢ Obtener valores del formulario    â”‚
â”‚ â€¢ Validar no estÃ©n vacÃ­os           â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AuthService: register()             â”‚
â”‚                                     â”‚
â”‚ â€¢ Validar longitud usuario (3+)     â”‚
â”‚ â€¢ Validar longitud contraseÃ±a (4+)  â”‚
â”‚ â€¢ Verificar usuario no exista       â”‚
â”‚ â€¢ Crear objeto usuario              â”‚
â”‚ â€¢ Hash de contraseÃ±a                â”‚
â”‚ â€¢ Guardar en array de usuarios      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
  Â¿Ã‰xito?
  â†™    â†˜
SÃ     NO
â†“       â†“
âœ…      âŒ
Login   Mensaje
Auto    Error
```

---

## ğŸ” Flujo de Login

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Usuario ingresa  â”‚
â”‚ credenciales     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ handleFormSubmit()         â”‚
â”‚ â€¢ Obtener usuario/pass     â”‚
â”‚ â€¢ Validar no vacÃ­os        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AuthService.login()        â”‚
â”‚                            â”‚
â”‚ â€¢ Buscar usuario en array  â”‚
â”‚ â€¢ Hash de contraseÃ±a       â”‚
â”‚ â€¢ Comparar con almacenada  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
  Â¿Coinciden?
  â†™    â†˜
SÃ     NO
â†“       â†“
âœ…      âŒ
â€¢ Set   Error:
  currentUser "Incorrectos"
â€¢ Save
  localStorage
â€¢ Fire
  onLoginSuccess
```

---

## ğŸ‘¤ Flujo de Invitado

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Usuario hace    â”‚
â”‚ clic en invitadoâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ handleGuestLogin()           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AuthService.loginAsGuest()   â”‚
â”‚                              â”‚
â”‚ â€¢ Generar ID Ãºnico           â”‚
â”‚ â€¢ Crear usuario invitado     â”‚
â”‚ â€¢ Marcar isGuest = true      â”‚
â”‚ â€¢ Generar username aleatorio â”‚
â”‚ â€¢ Set currentUser            â”‚
â”‚ â€¢ Save en localStorage       â”‚
â”‚ â€¢ Retornar usuario           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ onLoginSuccess()             â”‚
â”‚ â€¢ Iniciar juego              â”‚
â”‚ â€¢ Mostrar "Invitado_XXXX"    â”‚
â”‚ â€¢ NO guardar stats           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ Estructura de Datos - LocalStorage

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           LOCALSTORAGE DEL NAVEGADOR                â”‚
â”‚                                                     â”‚
â”‚  Clave: "batalla-naval-users"                      â”‚
â”‚  Tipo: Array JSON                                  â”‚
â”‚  Contenido:                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [                                            â”‚  â”‚
â”‚  â”‚   {                                          â”‚  â”‚
â”‚  â”‚     id: "123456789",                        â”‚  â”‚
â”‚  â”‚     username: "juan_perez",                 â”‚  â”‚
â”‚  â”‚     password: "1234567890",  â† Hash        â”‚  â”‚
â”‚  â”‚     createdAt: "2024-11-06...",           â”‚  â”‚
â”‚  â”‚     gamesPlayed: 5,                        â”‚  â”‚
â”‚  â”‚     gamesWon: 3,                           â”‚  â”‚
â”‚  â”‚     averageShots: 25.4                     â”‚  â”‚
â”‚  â”‚   },                                        â”‚  â”‚
â”‚  â”‚   { ... mÃ¡s usuarios ... }                 â”‚  â”‚
â”‚  â”‚ ]                                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â”‚  Clave: "batalla-naval-user"                       â”‚
â”‚  Tipo: Objeto JSON                                 â”‚
â”‚  Contenido:                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ {                                            â”‚  â”‚
â”‚  â”‚   id: "123456789",                         â”‚  â”‚
â”‚  â”‚   username: "juan_perez",                  â”‚  â”‚
â”‚  â”‚   gamesPlayed: 5,                          â”‚  â”‚
â”‚  â”‚   gamesWon: 3,                             â”‚  â”‚
â”‚  â”‚   averageShots: 25.4                       â”‚  â”‚
â”‚  â”‚ }                                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ Capas de Arquitectura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           CAPA DE PRESENTACIÃ“N                      â”‚
â”‚                                                    â”‚
â”‚  LoginScreen.js        UIManager.js               â”‚
â”‚  â€¢ Renderizar form     â€¢ Mostrar usuario          â”‚
â”‚  â€¢ Event listeners     â€¢ Actualizar UI            â”‚
â”‚  â€¢ ValidaciÃ³n visual   â€¢ Mostrar estadÃ­sticas     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        CAPA DE CONTROLADORES                        â”‚
â”‚                                                    â”‚
â”‚  main.js               GameController.js          â”‚
â”‚  â€¢ Iniciar app         â€¢ LÃ³gica del juego         â”‚
â”‚  â€¢ Flujo de auth       â€¢ GestiÃ³n de estados       â”‚
â”‚  â€¢ Routing             â€¢ Event emitting           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          CAPA DE SERVICIOS                          â”‚
â”‚                                                    â”‚
â”‚  AuthService.js                                   â”‚
â”‚  â€¢ LÃ³gica de autenticaciÃ³n                        â”‚
â”‚  â€¢ ValidaciÃ³n de datos                            â”‚
â”‚  â€¢ GestiÃ³n de sesiÃ³n                              â”‚
â”‚  â€¢ CÃ¡lculo de estadÃ­sticas                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           CAPA DE PERSISTENCIA                      â”‚
â”‚                                                    â”‚
â”‚  LocalStorage                                     â”‚
â”‚  â€¢ batalla-naval-users (Array de usuarios)        â”‚
â”‚  â€¢ batalla-naval-user (Usuario actual)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ Componentes y Dependencias

```
LoginScreen.js
    â†“
    â”œâ”€â”€ AuthService.js
    â”‚   â””â”€â”€ localStorage
    â”‚
    â””â”€â”€ CSS: login.css

main.js
    â†“
    â”œâ”€â”€ LoginScreen.js
    â”‚
    â”œâ”€â”€ GameController.js
    â”‚   â”œâ”€â”€ Player.js
    â”‚   â”œâ”€â”€ Board.js
    â”‚   â”œâ”€â”€ Ship.js
    â”‚   â””â”€â”€ AIService.js
    â”‚
    â””â”€â”€ UIManager.js
        â”œâ”€â”€ BoardView.js
        â”œâ”€â”€ AuthService.js
        â””â”€â”€ CSS: todos los estilos
```

---

## ğŸ”„ Ciclo de Vida de SesiÃ³n

```
INICIO
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  App cargada        â”‚
â”‚  localStorage vacÃ­o â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LoginScreen aparece    â”‚
â”‚  loadUserFromStorage()  â”‚
â”‚  â†’ null (sin sesiÃ³n)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
  Usuario elige:
  
  â”œâ”€ Registrarse
  â”‚  â””â†’ register()
  â”‚     â””â†’ saveUsersToStorage()
  â”‚        â””â†’ saveCurrentUserToStorage()
  â”‚
  â”œâ”€ Login
  â”‚  â””â†’ login()
  â”‚     â””â†’ saveCurrentUserToStorage()
  â”‚
  â””â”€ Invitado
     â””â†’ loginAsGuest()
        â””â†’ saveCurrentUserToStorage()
     
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Juego comienza       â”‚
â”‚ currentUser activo   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
  Jugar partidas
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Al terminar partida      â”‚
â”‚ updatePlayerStats()      â”‚
â”‚ â†’ saveUsersToStorage()   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
  Â¿Cerrar navegador?
  â†™        â†˜
SÃ        NO
â†“         â†“
sesiÃ³n    Continuar
persiste  jugando
          â†“
        Juego en
        ejecuciÃ³n
```

---

## ğŸ¯ ValidaciÃ³n de Datos

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ENTRADA DE USUARIO         â”‚
â”‚                              â”‚
â”‚   Usuario + ContraseÃ±a       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
      Â¿AcciÃ³n?
    â†™     â†“     â†˜
Registro Login Invitado
    â†“     â†“       â†“
    
[REGISTRO]
    â†“
Â¿Usuario vacÃ­o?
  â”œâ”€ SÃ â†’ âŒ Error
  â””â”€ NO â†“
Â¿Usuario < 3 caracteres?
  â”œâ”€ SÃ â†’ âŒ Error
  â””â”€ NO â†“
Â¿Usuario ya existe?
  â”œâ”€ SÃ â†’ âŒ Error
  â””â”€ NO â†“
Â¿ContraseÃ±a vacÃ­a?
  â”œâ”€ SÃ â†’ âŒ Error
  â””â”€ NO â†“
Â¿ContraseÃ±a < 4 caracteres?
  â”œâ”€ SÃ â†’ âŒ Error
  â””â”€ NO â†“
âœ… CREAR USUARIO

[LOGIN]
    â†“
Â¿Usuario vacÃ­o?
  â”œâ”€ SÃ â†’ âŒ Error
  â””â”€ NO â†“
Â¿ContraseÃ±a vacÃ­a?
  â”œâ”€ SÃ â†’ âŒ Error
  â””â”€ NO â†“
Â¿Usuario existe?
  â”œâ”€ NO â†’ âŒ Error
  â””â”€ SÃ â†“
Â¿ContraseÃ±a correcta?
  â”œâ”€ NO â†’ âŒ Error
  â””â”€ SÃ â†“
âœ… LOGIN

[INVITADO]
    â†“
âœ… LOGIN INMEDIATO
```

---

## ğŸ“Š Flujo de EstadÃ­sticas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Juego comienza      â”‚
â”‚  Usuario autenticado â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
    Jugador juega
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Partida termina     â”‚
â”‚  checkGameOver()     â”‚
â”‚  emit('gameOver')    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UIManager.onGameOver()       â”‚
â”‚                              â”‚
â”‚ Â¿Usuario es invitado?        â”‚
â”‚  â”œâ”€ SÃ â†’ No guardar          â”‚
â”‚  â””â”€ NO â†“                     â”‚
â”‚   auth.updatePlayerStats()   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AuthService             â”‚
â”‚ updatePlayerStats()     â”‚
â”‚                         â”‚
â”‚ â€¢ gamesPlayed += 1      â”‚
â”‚ â€¢ Si ganÃ³: gamesWon+=1  â”‚
â”‚ â€¢ Calc promedio disparosâ”‚
â”‚ â€¢ Save en usuarios      â”‚
â”‚ â€¢ Save currentUser      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Datos guardados en   â”‚
â”‚ localStorage         â”‚
â”‚                      â”‚
â”‚ PrÃ³ximo login:       â”‚
â”‚ Datos recuperados    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Interfaz de Usuario

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      PANTALLA DE LOGIN               â”‚
â”‚                                      â”‚
â”‚         âš“ Batalla Naval              â”‚
â”‚          Bienvenido                  â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ [Iniciar] [Registrarse]          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                      â”‚
â”‚  Usuario:  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚            â”‚ juan_perez           â”‚  â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â”‚  ContraseÃ±a: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚              â”‚ â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢           â”‚  â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â”‚         [Iniciar SesiÃ³n]             â”‚
â”‚                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                      â”‚
â”‚         o                            â”‚
â”‚                                      â”‚
â”‚     [ğŸ‘¤ Jugar como Invitado]       â”‚
â”‚                                      â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                      â”‚
â”‚  Â¿No tienes cuenta? RegÃ­strate       â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        â†“ DespuÃ©s del Login â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    PANTALLA DE JUEGO                 â”‚
â”‚                                      â”‚
â”‚  âš“ Batalla Naval  ğŸ‘¤ juan_perez     â”‚
â”‚                  ğŸ“Š V: 3/5           â”‚
â”‚                                      â”‚
â”‚  [Tus Tableros de Juego]             â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Seguridad - Capas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CAPA 1: VALIDACIÃ“N CLIENTE        â”‚
â”‚                                     â”‚
â”‚ â€¢ LoginScreen.js                    â”‚
â”‚ â€¢ Validar campos requeridos         â”‚
â”‚ â€¢ Validar longitud mÃ­nima           â”‚
â”‚ â€¢ Feedback visual                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ (Datos validados)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CAPA 2: PROCESAMIENTO             â”‚
â”‚                                     â”‚
â”‚ â€¢ AuthService.js                    â”‚
â”‚ â€¢ Verificar duplicados              â”‚
â”‚ â€¢ Hash de contraseÃ±a                â”‚
â”‚ â€¢ BÃºsqueda en usuarios              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ (Datos procesados)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CAPA 3: PERSISTENCIA              â”‚
â”‚                                     â”‚
â”‚ â€¢ LocalStorage                      â”‚
â”‚ â€¢ Almacenamiento local              â”‚
â”‚ â€¢ EncriptaciÃ³n de navegador         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âš ï¸ NOTA: Para producciÃ³n se requiere:
  â€¢ ValidaciÃ³n en servidor
  â€¢ HTTPS
  â€¢ Bcrypt/Argon2
  â€¢ Database
  â€¢ JWT tokens
```

---

## ğŸ“Š Diagrama de Estado del Usuario

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NO LOGUEADO â”‚ â† Estado inicial
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ register() OR login() OR loginAsGuest()
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EN PROCESO DE   â”‚
â”‚ AUTENTICACIÃ“N    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Validar credenciales
       â†“
   Â¿VÃ¡lido?
   â†™    â†˜
  NO    SÃ
   â†“     â†“
   âŒ    âœ…
   â”‚     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚            â†“          â†“
   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚     â”‚  LOGUEADO â”‚  â”‚ INVITADO â”‚
   â”‚     â”‚ (Usuario  â”‚  â”‚ (SesiÃ³n  â”‚
   â”‚     â”‚ registrado)  â”‚ temporal)â”‚
   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚            â”‚           â”‚
   â”‚            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
   â”‚                  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ logout()
              â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  NO LOGUEADO â”‚ â† SesiÃ³n terminada
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Diagrama TÃ©cnico Completo del Sistema de AutenticaciÃ³n RF01**

*Ãšltima actualizaciÃ³n: Noviembre 2024*
